# **WuLiang-Bot更新日志**

### **2022/7/14更新**

代码新增：

- 对GeoAPI部分代码进行注释
- 增加城市地理信息查询



### **2022/7/18更新**

代码新增：

- 构建消息撤回
- 调整项目规范为阿里规范



### **2022/7/21更新**

代码新增：

- 添加Bot功能伪关机
  - 当Bot处于伪关机状态时，一切功能无法使用，当且仅当接收到Bot管理员的` [.开机]`指令时才会重新开放功能



### **2022/7/22更新**

代码新增：

- ~~添加B站直播间直播检测~~



### **2022/7/25更新**

代码新增：

- 添加了功能菜单指令`[/help]`
  - 输入`[/help]`可以查看调用Bot功能的指令，包括无参和含参指令
- 添加了猫猫码的相关封装类
- 添加了群友互动指令`[/抓]` `[/拍]` `[/锤]` 等指令



### **2022/7/26更新**

代码新增：

- 添加退群消息提醒



### **2022/7/27更新**

代码优化：

- 调整部分代码结构，优化代码量
- 整理API接口

代码新增：

- 增加私聊消息中的天气查询与地理查询



### **2022/7/29更新**

代码新增：

- 增加可达鸭自定义GIF的制作

  - 通过指令` [可达鸭 左侧文字 右侧文字]`的指令来制作自定义的可达鸭GIF图片

  

### **2022/7/31更新**

- 代码优化：

  - 修改禁言与解除禁言的代码，实现` [@群成员 禁言X分钟]`来禁言具体的群成员，同时增加权限判断，避免在Bot无管理权限时出现报错




### **2022/8/02更新**

- 代码新增：

  - 新增原神抽卡分析，对原神抽卡链接进行处理




### **2022/8/03更新**

- 代码新增：

  - 新增关键字屏蔽列表

  - 新增群组屏蔽




### **2022/8/18更新(代码迁移)**

- 增规范迁移至含Springboot的框架中
- 添加市信息API调用：
  - 青年大学习
  - 添加功能API的调用
  - 重构可达鸭GIF的生成
  - 城市信息API调用：
    1. 城市天气
    2. 城市地理



### **2022/8/19更新**

- 代码优化：
  - 完成对可达鸭与原神抽卡分析的优化，改进图片读取路径，便于在服务器上进行检索




### **2022/8/21更新**

- BUG修正：

  - 修复进行原神抽卡分析时遇到空池子时概率计算错误以及概率计算错误时出现的图片丢失问题




### **2022/8/22更新**

- 代码优化：

  - 替换思知人工智能回复API为茉莉API，以获得更多的功能和灵活的自定义



### **2022/8/29更新**

- 代码优化:
  - 原神抽卡分析新增3.0提纳里卡池分析

- 代码新增:
  - 原神米游社自动签到功能
    1. ​    能够手动签到
    2. ​    打开/关闭推送
    3. ​    删除cookie
    4. ​    绑定cookie



### **2022/8/29更新**

- 代码优化:
  - 原神自动签到功能的完善

- 代码新增:
  - 原神绑定列表
  - 黑名单列表



### **2022/9/01更新**

- 代码优化:
  - 原神自动签到推送功能小调整

- BUG修正:
  - 修复了抽卡分析在服务器上运行时出现的读取错误的BUG



### **2022/9/08更新**

- 代码优化:
  - 调整原神抽卡分析代码,优化细节
  - 调整了涩图发送功能,优化代码量，减少屏蔽概率
  - 调整了涩图发送的模式,现在通过转发形式发送



### **2022/9/10更新**

- 代码优化:
  - 优化原神签到代码量
  - 使部分签到功能能够在私聊与群聊中同时生效



### **2022/9/12更新**

- 代码优化:
  - 优化了bot启动后对消息的判断，减少了代码量



### **2022/9/12更新**

- 代码优化:

  - 对几个未关闭的InputStream进行关闭

  - 优化抽卡分析代码，在合成图片后删除图片减少内存占用

  - 更新了抽卡分析和米游社签到的资源，更新了角色信息的JSON对照

- 代码新增
  - 对原神签到图片进行改动，现在有更美观的奖励展示
  - 增加获取原神角色橱柜展示角色的信息，对获取到的JSON文件进行二次编译方便调用(未完善)



### **2022/9/19更新**

- 代码优化:

  - 优化可达鸭GIF处理模式，现在通过网络直接获取可达鸭GIF原图进行合成，不存储到本地，减少内存占用并提高运行速度
  - 优化涩图发送，将涩图在本地进行一次压缩，降低图片大小，便于更快速的发送图片，同时有效防止腾讯屏蔽
- 代码新增:
  - 新增[`人生重开`](src/main/java/simbot/example/BootAPIUse/Game/LifeRestart/LifeRestart.java)，现在能在Bot上体验到简易版的人生重开模拟器



### **2022/9/21更新**

- 代码新增：
  - 将"存在某事件时一定不可能发生"与人生重开模拟器关联，避免出现冲突事件
  - 新增[人生总结]，当游戏结束时发送合成后的各项属性总结

### **2022/10/2更新**
- 代码新增:
  -   增加根据原神JSON自动更新常驻池内容
  -   抽卡分析新增原神3.1版本赛诺
